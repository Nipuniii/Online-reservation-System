<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <link href="/css/tailwind.css" rel="stylesheet">
  <meta charset="UTF-8">
  <title>Branch&Facilities</title>
</head>
<body>
<div class="flex h-screen">
  <aside  style="width: 25%;" class="w-1/4 bg-black text-white">
    <th:block th:replace="fragments/admin-sidebar :: div"></th:block>
  </aside>

  <div style="width: 75%;" class="flex-1 flex flex-col ">
    <header class="w-full bg-white">
      <th:block th:replace="fragments/admin-header :: div"></th:block>
    </header>
    <div class=" mt-24">
      <div class="mx-10 md:mb-4">
        <h1 class="text-4xl font-bold font-anton text-dark-yellow md:mt-40">ADD <span class="text-black">Branch</span></h1>
        <form id="productForm mt-24" >
          <div class="flex flex-row gap-4 md:gap-8 mt-10">
            <div class="flex flex-col w-7/12">
              <label for="category">Select Category</label>
              <select name="category_id" id="category" class="w-full p-2 border border-gray-800 rounded-lg opacity-60">
                <option value="">Select a category
                <option value="">Kandy</option>
                <option value="">Galle</option>
                <option value="">Colombo</option>
                <!-- Category options should be populated here -->
              </select>
              <div class="text-lg text-red-600 mt-2" id="category_idError"></div>
            </div>

            <div class="w-7/12">
              <div style="display: contents">
                <div class="mb-4 font-semibold text-lg">Select all Facilities that you want the hotel to include.</div>
                <div id="selects" class="grid grid-cols-2 gap-2">
                  <label class="text-slate-200 font-bold mt-2 text-sm py-2 px-4 rounded-full border border-pink-600">
                    <input class="hidden" type="checkbox" name="facilities" value="Parking"> Parking
                  </label>
                  <label class="text-slate-200 font-bold mt-2 text-sm py-2 px-4 rounded-full border border-pink-600">
                    <input class="hidden" type="checkbox" name="facilities" value="Wi-Fi"> Wi-Fi
                  </label>
                  <label class="text-slate-200 font-bold mt-2 text-sm py-2 px-4 rounded-full border border-pink-600">
                    <input class="hidden" type="checkbox" name="facilities" value="Swimming Pool"> Swimming Pool
                  </label>
                  <label class="text-slate-200 font-bold mt-2 text-sm py-2 px-4 rounded-full border border-pink-600">
                    <input class="hidden" type="checkbox" name="facilities" value="Gym"> Gym
                  </label>
                  <label class="text-slate-200 font-bold mt-2 text-sm py-2 px-4 rounded-full border border-pink-600">
                    <input class="hidden" type="checkbox" name="facilities" value="Spa"> Spa
                  </label>
                  <label class="text-slate-200 font-bold mt-2 text-sm py-2 px-4 rounded-full border border-pink-600">
                    <input class="hidden" type="checkbox" name="facilities" value="Restaurant"> Restaurant
                  </label>
                  <label class="text-slate-200 font-bold mt-2 text-sm py-2 px-4 rounded-full border border-pink-600">
                    <input class="hidden" type="checkbox" name="facilities" value="Bar"> Bar
                  </label>
                </div>
              </div>
              <script>
                const labels = document.querySelectorAll("#selects label");

                labels.forEach(label => {
                    const checkbox = label.querySelector('input[type="checkbox"]');
                    label.addEventListener('click', () => {
                        if (checkbox.checked) {
                            label.classList.add("bg-black", "text-white");
                        } else {
                            label.classList.remove("bg-black", "text-white");
                        }
                    });
                });
              </script>
            </div>




          </div>


          <button type="button" onclick="validatePrices()" class="items-center mt-4 p-2 bg-dark-yellow flex justify-center md:w-[7%] w-[150px] rounded-lg text-white md:mt-4 text-center">Submit</button>
        </form>
      </div>
    </div>
  </div>
</div>


<script>
  function loadPreview(index) {
      const inputFile = document.getElementById('image_' + index);
      const previewImage = document.getElementById('preview_image_' + index);
      const infoBox = document.getElementById('info_image_' + index);
      const file = inputFile.files[0];

      if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
              previewImage.src = e.target.result;
              previewImage.classList.remove('hidden');
              infoBox.classList.add('hidden');
          }
          reader.readAsDataURL(file);
      } else {
          previewImage.classList.add('hidden');
          infoBox.classList.remove('hidden');
      }
  }

  function validatePrices() {
      var price = parseFloat(document.getElementById('price').value);
      var sellingPrice = parseFloat(document.getElementById('selling_price').value);

      var priceError = document.getElementById('priceError');
      var sellingPriceError = document.getElementById('sellingPriceError');

      // Reset previous error messages
      priceError.textContent = "";
      sellingPriceError.textContent = "";

      if (isNaN(price) || isNaN(sellingPrice)) {
          priceError.textContent = "Please enter valid numeric values for both prices.";
          return;
      }

      if (sellingPrice > price) {
          sellingPriceError.textContent = "Selling price must be lower than or equal to the price.";
      } else {
          // Perform form submission or further actions
          document.getElementById('productForm').submit();
      }
  }
</script>
</body>
</html>